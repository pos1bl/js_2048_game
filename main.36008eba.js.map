{"version":3,"sources":["scripts/main.js"],"names":["Array","prototype","random","Math","floor","length","game","document","querySelector","startButton","messages","gameField","querySelectorAll","startMessage","loseMessage","winMessage","score","fields","colorClasses","directions","ArrowUp","ArrowDown","ArrowLeft","ArrowRight","finalResult","curScore","addEventListener","classList","contains","remove","add","textContent","forEach","field","i","innerText","generateFirst","innerHTML","event","key","move","rematch","freeFields","Object","keys","fromEntries","entries","filter","x","randomField","addedNumber","paint","isLose","lose","checkWin","endArray","counter","includes","object","values","some","value","direction","cycles","limit","increment","indexFirst","indexSecond","indexThird","firstCycle","secondCycle","thirdCycle","setPrototypeOf","checkField","newNumber","firstRandomField","splice","secondRandomField","first","second","str","Number"],"mappings":"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","file":"main.36008eba.js","sourceRoot":"..\\src","sourcesContent":["'use strict';\r\n\r\nArray.prototype.random = function() {\r\n  return this[Math.floor((Math.random() * this.length))];\r\n};\r\n\r\nconst game = document.querySelector('.container');\r\nconst startButton = game.querySelector('.button');\r\nconst messages = game.querySelector('.message-container');\r\nconst gameField = game.querySelectorAll('.field-cell');\r\nconst startMessage = messages.querySelector('.message-start');\r\nconst loseMessage = messages.querySelector('.message-lose');\r\nconst winMessage = messages.querySelector('.message-win');\r\nconst score = game.querySelector('.game-score');\r\nconst fields = {};\r\nconst colorClasses = ['field-cell--2', 'field-cell--4',\r\n  'field-cell--8', 'field-cell--16', 'field-cell--32',\r\n  'field-cell--64', 'field-cell--128', 'field-cell--256',\r\n  'field-cell--512', 'field-cell--1024', 'field-cell--2048'];\r\nconst directions = {\r\n  ArrowUp: 'ArrowUp',\r\n  ArrowDown: 'ArrowDown',\r\n  ArrowLeft: 'ArrowLeft',\r\n  ArrowRight: 'ArrowRight',\r\n};\r\nconst finalResult = 2048;\r\nlet curScore = 0;\r\n\r\nstartButton.addEventListener('click', () => {\r\n  if (startButton.classList.contains('start')) {\r\n    startButton.classList.remove('start');\r\n    startButton.classList.add('restart');\r\n    startButton.textContent = 'Restart';\r\n    startMessage.classList.add('hidden');\r\n\r\n    [...gameField].forEach((field, i) => {\r\n      fields[i] = field.innerText;\r\n    });\r\n\r\n    generateFirst(fields);\r\n  } else if (startButton.classList.contains('restart')) {\r\n    gameField.forEach(field => {\r\n      field.innerText = '';\r\n      field.classList.remove(...colorClasses);\r\n    });\r\n\r\n    for (let i = 0; i < 16; i++) {\r\n      fields[i] = '';\r\n    }\r\n\r\n    generateFirst(fields);\r\n\r\n    score.innerHTML = 0;\r\n    curScore = 0;\r\n    loseMessage.classList.add('hidden');\r\n    winMessage.classList.add('hidden');\r\n  }\r\n});\r\n\r\ndocument.addEventListener('keydown', event => {\r\n  if (!startButton.classList.contains('start')\r\n    && loseMessage.classList.contains('hidden')\r\n    && winMessage.classList.contains('hidden')) {\r\n    switch (event.key) {\r\n      case directions.ArrowUp:\r\n        move(directions.ArrowUp, fields);\r\n        rematch(fields);\r\n        break;\r\n      case directions.ArrowDown:\r\n        move(directions.ArrowDown, fields);\r\n        rematch(fields);\r\n        break;\r\n      case directions.ArrowLeft:\r\n        move(directions.ArrowLeft, fields);\r\n        rematch(fields);\r\n        break;\r\n      case directions.ArrowRight:\r\n        move(directions.ArrowRight, fields);\r\n        rematch(fields);\r\n        break;\r\n      default:\r\n        return;\r\n    }\r\n\r\n    let freeFields = Object\r\n      .keys(Object\r\n        .fromEntries(Object\r\n          .entries(fields)\r\n          .filter(x => x[1] === '')));\r\n\r\n    if (freeFields.length > 0) {\r\n      const randomField = freeFields.random();\r\n      const addedNumber = Math.random() >= 0.1\r\n        ? 2\r\n        : 4;\r\n\r\n      fields[randomField] = addedNumber;\r\n      gameField[+randomField].textContent = addedNumber;\r\n    }\r\n\r\n    freeFields = Object\r\n      .keys(Object\r\n        .fromEntries(Object\r\n          .entries(fields)\r\n          .filter(x => x[1] === '')));\r\n\r\n    paint(gameField);\r\n\r\n    score.innerHTML = curScore;\r\n\r\n    const isLose = lose(fields);\r\n\r\n    if (checkWin(fields)) {\r\n      winMessage.classList.remove('hidden');\r\n    }\r\n\r\n    if (freeFields.length === 0 && isLose) {\r\n      loseMessage.classList.remove('hidden');\r\n    }\r\n  }\r\n});\r\n\r\nconst lose = (fields) => {\r\n  const endArray = [3, 7, 11, 15];\r\n  let counter = 0;\r\n\r\n  for (let i = 0; i <= 15; i++) {\r\n    if (\r\n      ((fields[i] !== fields[i + 1] && !endArray.includes(i))\r\n        || (endArray.includes(i) && fields[i] !== fields[i - 1]))\r\n      && fields[i] !== fields[i + 4]) {\r\n      counter++;\r\n    }\r\n  }\r\n\r\n  return counter === 16;\r\n};\r\n\r\nconst checkWin = (object) => {\r\n  const values = Object.values(object);\r\n\r\n  return values.some(value => value === finalResult);\r\n};\r\n\r\nconst move = (direction, object) => {\r\n  const cycles = {\r\n    i: 0,\r\n    limit() {\r\n      return this.i <= 0;\r\n    },\r\n    increment: 1,\r\n    indexFirst: 0,\r\n    indexSecond: 0,\r\n    indexThird: 0,\r\n  };\r\n\r\n  const firstCycle = {};\r\n  const secondCycle = {};\r\n  const thirdCycle = {};\r\n\r\n  Object.setPrototypeOf(firstCycle, cycles);\r\n  Object.setPrototypeOf(secondCycle, cycles);\r\n  Object.setPrototypeOf(thirdCycle, cycles);\r\n\r\n  switch (direction) {\r\n    case directions.ArrowUp:\r\n      cycles.increment = 1;\r\n      cycles.indexFirst = -4;\r\n      cycles.indexSecond = -8;\r\n      cycles.indexThird = -12;\r\n\r\n      firstCycle.i = 4;\r\n\r\n      firstCycle.limit = function() {\r\n        return this.i <= 7;\r\n      };\r\n\r\n      secondCycle.i = 8;\r\n\r\n      secondCycle.limit = function() {\r\n        return this.i <= 11;\r\n      };\r\n\r\n      thirdCycle.i = 12;\r\n\r\n      thirdCycle.limit = function() {\r\n        return this.i <= 15;\r\n      };\r\n      break;\r\n    case directions.ArrowDown:\r\n      cycles.increment = -1;\r\n      cycles.indexFirst = 4;\r\n      cycles.indexSecond = 8;\r\n      cycles.indexThird = 12;\r\n\r\n      firstCycle.i = 11;\r\n\r\n      firstCycle.limit = function() {\r\n        return this.i >= 8;\r\n      };\r\n\r\n      secondCycle.i = 7;\r\n\r\n      secondCycle.limit = function() {\r\n        return this.i >= 4;\r\n      };\r\n\r\n      thirdCycle.i = 3;\r\n\r\n      thirdCycle.limit = function() {\r\n        return this.i >= 0;\r\n      };\r\n      break;\r\n    case directions.ArrowLeft:\r\n      cycles.increment = 4;\r\n      cycles.indexFirst = -1;\r\n      cycles.indexSecond = -2;\r\n      cycles.indexThird = -3;\r\n\r\n      firstCycle.i = 1;\r\n\r\n      firstCycle.limit = function() {\r\n        return this.i <= 13;\r\n      };\r\n\r\n      secondCycle.i = 2;\r\n\r\n      secondCycle.limit = function() {\r\n        return this.i <= 14;\r\n      };\r\n\r\n      thirdCycle.i = 3;\r\n\r\n      thirdCycle.limit = function() {\r\n        return this.i <= 15;\r\n      };\r\n      break;\r\n    case directions.ArrowRight:\r\n      cycles.increment = 4;\r\n      cycles.indexFirst = 1;\r\n      cycles.indexSecond = 2;\r\n      cycles.indexThird = 3;\r\n\r\n      firstCycle.i = 2;\r\n\r\n      firstCycle.limit = function() {\r\n        return this.i <= 14;\r\n      };\r\n\r\n      secondCycle.i = 1;\r\n\r\n      secondCycle.limit = function() {\r\n        return this.i <= 13;\r\n      };\r\n\r\n      thirdCycle.i = 0;\r\n\r\n      thirdCycle.limit = function() {\r\n        return this.i <= 12;\r\n      };\r\n      break;\r\n  }\r\n\r\n  for (let i = firstCycle.i; firstCycle.limit(); i += firstCycle.increment) {\r\n    if (object[i] === object[i + firstCycle.indexFirst]\r\n        && checkField(object[i])) {\r\n      object[i + firstCycle.indexFirst] = newNumber(object[i]);\r\n      curScore += newNumber(object[i]);\r\n      object[i] = '';\r\n    } else if (object[i + firstCycle.indexFirst] === '') {\r\n      object[i + firstCycle.indexFirst] = object[i];\r\n      object[i] = '';\r\n    }\r\n\r\n    firstCycle.i += firstCycle.increment;\r\n  }\r\n\r\n  for (let i = secondCycle.i; secondCycle.limit(); i += secondCycle.increment) {\r\n    if (object[i] === object[i + secondCycle.indexFirst]\r\n        && checkField(object[i])) {\r\n      object[i + secondCycle.indexFirst] = newNumber(object[i]);\r\n      curScore += newNumber(object[i]);\r\n      object[i] = '';\r\n    } else if (object[i + secondCycle.indexFirst] === '') {\r\n      if (object[i + secondCycle.indexSecond] === object[i]\r\n          && checkField(object[i])) {\r\n        object[i + secondCycle.indexSecond] = newNumber(object[i]);\r\n        curScore += newNumber(object[i]);\r\n        object[i] = '';\r\n      } else if (object[i + secondCycle.indexSecond] === '') {\r\n        object[i + secondCycle.indexSecond] = object[i];\r\n        object[i] = '';\r\n      } else {\r\n        object[i + secondCycle.indexFirst] = object[i];\r\n        object[i] = '';\r\n      }\r\n    }\r\n\r\n    secondCycle.i += secondCycle.increment;\r\n  }\r\n\r\n  for (let i = thirdCycle.i; thirdCycle.limit(); i += thirdCycle.increment) {\r\n    if (object[i] === object[i + thirdCycle.indexFirst]\r\n        && checkField(object[i])) {\r\n      object[i + thirdCycle.indexFirst] = newNumber(object[i]);\r\n      curScore += newNumber(object[i]);\r\n      object[i] = '';\r\n    } else if (object[i + thirdCycle.indexFirst] === '') {\r\n      if (object[i + thirdCycle.indexSecond] === object[i]\r\n          && checkField(object[i])) {\r\n        object[i + thirdCycle.indexSecond] = newNumber(object[i]);\r\n        curScore += newNumber(object[i]);\r\n        object[i] = '';\r\n      } else if (object[i + thirdCycle.indexSecond] === '') {\r\n        if (object[i + thirdCycle.indexThird] === object[i]\r\n            && checkField(object[i])) {\r\n          object[i + thirdCycle.indexThird] = newNumber(object[i]);\r\n          curScore += newNumber(object[i]);\r\n          object[i] = '';\r\n        } else if (object[i + thirdCycle.indexThird] === '') {\r\n          object[i + thirdCycle.indexThird] = object[i];\r\n          object[i] = '';\r\n        } else {\r\n          object[i + thirdCycle.indexSecond] = object[i];\r\n          object[i] = '';\r\n        }\r\n      } else {\r\n        object[i + thirdCycle.indexFirst] = object[i];\r\n        object[i] = '';\r\n      }\r\n    }\r\n\r\n    thirdCycle.i += thirdCycle.increment;\r\n  }\r\n};\r\n\r\nconst rematch = (fields) => {\r\n  for (let i = 0; i <= 15; i++) {\r\n    gameField[i].textContent = fields[i];\r\n  }\r\n};\r\n\r\nconst checkField = (field) => field !== '';\r\n\r\nconst paint = (gameField) => {\r\n  gameField.forEach(field => {\r\n    switch (field.textContent) {\r\n      case '2':\r\n        field.classList.remove(...colorClasses);\r\n        field.classList.add('field-cell--2');\r\n        break;\r\n      case '4':\r\n        field.classList.remove(...colorClasses);\r\n        field.classList.add('field-cell--4');\r\n        break;\r\n      case '8':\r\n        field.classList.remove(...colorClasses);\r\n        field.classList.add('field-cell--8');\r\n        break;\r\n      case '16':\r\n        field.classList.remove(...colorClasses);\r\n        field.classList.add('field-cell--16');\r\n        break;\r\n      case '32':\r\n        field.classList.remove(...colorClasses);\r\n        field.classList.add('field-cell--32');\r\n        break;\r\n      case '64':\r\n        field.classList.remove(...colorClasses);\r\n        field.classList.add('field-cell--64');\r\n        break;\r\n      case '128':\r\n        field.classList.remove(...colorClasses);\r\n        field.classList.add('field-cell--128');\r\n        break;\r\n      case '256':\r\n        field.classList.remove(...colorClasses);\r\n        field.classList.add('field-cell--256');\r\n        break;\r\n      case '512':\r\n        field.classList.add('field-cell--512');\r\n        break;\r\n      case '1024':\r\n        field.classList.remove(...colorClasses);\r\n        field.classList.add('field-cell--1024');\r\n        break;\r\n      case '2048':\r\n        field.classList.remove(...colorClasses);\r\n        field.classList.add('field-cell--2048');\r\n        break;\r\n      default:\r\n        field.classList.remove(...colorClasses);\r\n    }\r\n  });\r\n};\r\n\r\nconst generateFirst = (object) => {\r\n  const keys = Object.keys(object);\r\n  const firstRandomField = keys.random();\r\n\r\n  keys.splice(firstRandomField, 1);\r\n\r\n  const secondRandomField = keys.random();\r\n\r\n  const addedNumber = () => {\r\n    return Math.random() >= 0.1\r\n      ? 2\r\n      : 4;\r\n  };\r\n\r\n  const first = addedNumber();\r\n  const second = addedNumber();\r\n\r\n  fields[firstRandomField] = first;\r\n  fields[secondRandomField] = second;\r\n  gameField[+firstRandomField].textContent = first;\r\n  gameField[+secondRandomField].textContent = second;\r\n\r\n  paint(gameField);\r\n};\r\n\r\nconst newNumber = (str) => Number(str) * 2;\r\n"]}